<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>this、call、apply、bind、闭包</title>
</head>
<body>
    <!-- 
        this:谁绑定的方法、事件，谁就是this
        事件源：谁触发的事件，谁就是事件源
        1.事件处理函数---dom对象
        2.var定义的变量和函数-----window
        3.定时器 立即调用函数-------window---异步操作任务队列   vs  主线程   js单线程
        4.自定义对象中-----------自定义对象
        5.类-----------实例化对象
     -->

     <!-- 
         call、apply、bind----------函数.call()  函数.apply()   函数.bind()
         call：改变this指向，（指向对象，n个参数），自动调用函数
         apply：改变this指向，（指向对象，[n个参数的数组]），自动调用函数
         bind:改变this指向，（指向对象，n个参数），不会自动调用函数
         三种方法与定时器的结合settimeout(function(){}.bind(this),3000)
      -->

      <!--
          闭包条件：---------return 函数  ;()()不行？？
          1.两个函数：嵌套
          2.里面函数调用外面函数

          优势：
          1.变量一直存在于内存中，不会被垃圾回收
          2.在循环列表时2拿到对应的i （xingcan）（shican）
          缺点
          1.内存泄漏--不够用了
       -->

       <!-- 函数的立即调用 -->
    <script>
        // a afun  挂载在window下
        var a=1;
        var afun=function(){
            console.log(this);// window
        }
    </script>
    <ul>
        <li>1</li>
        <li>2</li>
        <li>3</li>
    </ul>
    <script>
        function fun(){
            var x=1;
            console.log(1111111);
            // return function(){
            //     console.log(666);
            //     x++;
            //     console.log(x);
            // }
            //liji diaoyong
            // (function (x){
            //     console.log(666);
            //     x++;
            //     console.log(x);
            // })(x)
        }
        // why?
        // fun()();//2
        // fun()();//2
        // var a=fun();
        // a();//2
        // a();//3
        fun();//2
        fun();//2

        var ali=document.getElementsByTagName('li');
        // for(var i=0;i<ali.length;i++){
        //     // 函数立即调用，(形参)(实参)，不用再声明一个属性index、
        //     (function(y){
        //         ali[y].onclick=function(){
        //             console.log(y);
        //         }
        //     })(i)
        // }

        // for(var i=0;i<ali.length;i++){
        //     return function(i){
        //         ali[i].onclick=function(){
        //             console.log(i);
        //         }
        //     }
        // }
    </script>
</body>
</html>